<trgr:triggers xmlns:trgr="http://marklogic.com/xdmp/triggers" xmlns:sec="http://marklogic.com/xdmp/security">
  <trgr:trigger>
    <trgr:name>FilterPdfCreateTrigger</trgr:name>
    <trgr:description>Trigger to filter a pdf doc dropped to the ml uploader component</trgr:description>
    <trgr:data-event>
      <trgr:collection-scope>
        <trgr:uri>pdf</trgr:uri>
      </trgr:collection-scope>
      <trgr:document-content>
        <trgr:update-kind>create</trgr:update-kind>
      </trgr:document-content>
      <trgr:when>post-commit</trgr:when>
    </trgr:data-event>
    <trgr:module>
      <trgr:database>${modules-db}</trgr:database>
      <trgr:root>/</trgr:root>
      <trgr:path>/triggers/cpdf.xqy</trgr:path>
    </trgr:module>
    <trgr:enabled>true</trgr:enabled>
    <trgr:permissions>
      <sec:permission>
        <sec:capability>read</sec:capability>
        <sec:role-name>${app-role}</sec:role-name>
      </sec:permission>
      <sec:permission>
        <sec:capability>update</sec:capability>
        <sec:role-name>${app-role}</sec:role-name>
      </sec:permission>
    </trgr:permissions>
    <trgr:recursive>false</trgr:recursive>
    <trgr:task-priority>normal</trgr:task-priority>
  </trgr:trigger>

    <trgr:trigger>
    <trgr:name>FilterPdfModifyTrigger</trgr:name>
    <trgr:description>Trigger to filter a pdf doc dropped to the ml uploader component</trgr:description>
    <trgr:data-event>
      <trgr:collection-scope>
        <trgr:uri>pdf</trgr:uri>
      </trgr:collection-scope>
      <trgr:document-content>
        <trgr:update-kind>modify</trgr:update-kind>
      </trgr:document-content>
      <trgr:when>post-commit</trgr:when>
    </trgr:data-event>
    <trgr:module>
      <trgr:database>${modules-db}</trgr:database>
      <trgr:root>/</trgr:root>
      <trgr:path>/triggers/cpdf.xqy</trgr:path>
    </trgr:module>
    <trgr:enabled>true</trgr:enabled>
    <trgr:permissions>
      <sec:permission>
        <sec:capability>read</sec:capability>
        <sec:role-name>${app-role}</sec:role-name>
      </sec:permission>
      <sec:permission>
        <sec:capability>update</sec:capability>
        <sec:role-name>${app-role}</sec:role-name>
      </sec:permission>
    </trgr:permissions>
    <trgr:recursive>false</trgr:recursive>
    <trgr:task-priority>normal</trgr:task-priority>
  </trgr:trigger>

</trgr:triggers>
